# 数据库原理
## 一.基本概念
### 1.数据
数据库存储的基本对象，能够输入计算机并能被计算机程序识别和处理的符号集合，包括但不限于文本、图像、音视频。<br/>

### 2.数据库
数据库是长期存储在计算机内、有组织的、可共享的大量的数据集合。<br/>
数据库中的数据按照一定的数据模型组织、描述和保存，具有较小的冗余度、较高的数据独立性和易扩展性。<br/>

### 3.数据库管理系统
DBMS，即Data Base Management System，是位于用户和操作系统之间的支撑软件，用来帮助软件高效运行。<br/>

#### 主要功能
1.数据库定义功能（DDL）<br/>
2.数据库操纵功能（DML）<br/>
4.数据库的运行管理与控制功能（DCL）<br/>
5.数据库与程序的应用接口支持<br/>

### 4.数据库系统
#### 定义
DBS，即Data Base System，是数据库、数据库管理系统、应用程序、DBA（Data Base Administrator，数据库管理员）、计算机系统平台（包括硬件、操作系统、网络系统等）的集合。<br/>

#### 发展阶段
1.人工管理阶段<br/>
计算机主要用于科学计算，没有磁盘设备。<br/>
2.文件系统阶段<br/>
磁带、磁盘、操作系统、高级语言的出现，让数据存储成为可能。<br/>
3.数据库系统阶段<br/>
1970年E.F.Codd 提出关系数据模型。独立的、有组织的、共享的数据存储模式成为可能。<br/>

#### 特点
1.数据的结构化：采用一定的数据模型。<br/>
2.数据的共享性高、冗余度低、易扩展：可被多人访问、数据库中同一数据会尽可能少的存储副本、可以简单地增加或减少数据。<br/>
3.数据地独立性高<br/>
物理独立性：应用程序与磁盘上数据库中的数据是相互独立的。<br/>
逻辑独立性：应用程序与磁盘上数据库中的逻辑结构是相互独立的。<br/>
4.数据由DBMS统一管理<br/>
5.数据的最小存取单元是数据项<br/>

#### 三级模式/三级体系结构
1.外模式：也称子模式或用户模式或视图层，数据库中对用户不透明的部分。<br/>
2.模式：也称逻辑模式或逻辑层，是数据库中全体数据的逻辑结构和特征的描述。<br/>
3.内模式：也称存储模式或物理层，是数据库物理结构和存储方式的描述。<br/>

#### 两级映像
1.外模式/模式映像<br/>
定义了外模式与模式之间的对应关系，当模式改变时，映像关系会相应改变，以保证外模式保持不变。<br/>
保证了逻辑独立性。<br/>
2.模式/内模式映像<br/>
定义了模式与内模式之间的对应关系，当数据库的存储结构改变时，映像关系会相应改变，以保证模式保持不变。<br/>
保证了物理独立性。<br/>

#### 数据模型
数据库组织数据的方式。<br/>
根据数据抽象的不同级别和数据模型应用目的的不同可分为三个层次，概念数据模型、逻辑数据模型、物理数据模型。<br/>

1.概念数据模型<br/>
是对现实世界的抽象，有以下几个概念。<br/>
实体（Entity）：客观存在的事物，如一个学生。<br/>
属性（Attribute）：实体所具有的特性，如学生的学号、姓名。<br/>
联系（Relationship）：实体与实体之间的联系，概念模型的一种表示方法：实体-联系图（E-R图）<br/>

2.逻辑数据模型<br/>
按照计算机系统的观点对数据建模，用于DBMS的实现。<br/>
有以下几个常见的层次数据模型。<br/>

a.层次模型<br/>
层次模型是数据库系统中最早出现的数据模型<br/>
层次模型用树形结构来表示各类实体以及实体间的联系<br/>
层次模型：<br/>
除根节点以外，其他结点有且只有一个父亲结点<br/>

层次数据库系统的典型代表是IBM公司的IMS （Information Management System，IMS）数据库<br/>

b.网状模型<br/>
网状模型是网状数据库的组织方式<br/>
网状模型：<br/>
允许一个以上的结点无父亲<br/>
一个结点可以有多于一个的父亲<br/>

1964年，美国通用电气公司发布了世界上第一个网状数据库系统——IDS（Integrated Data Storage，集成数据存储）<br/>

c.关系模型<br/>
用关系来描述实体之间的联系，关系是一张二维表。<br/>

3.物理数据模型<br/>
描述数据在硬件层面的存取方式。<br/>

## 二.关系模型（Relational Model）
用二维表（集合）来组织数据及数据之间联系的模型。<br/>

### 1.概念
属性：表中的每一列必须有一个名字，称为属性。<br/>
域:属性的取值集合或范围就称为域。例如，大学生的年龄一般在14-40岁之间，因此学生的属性“年龄”的域就是（14-40）<br/>
元组：表中的每一行数据称作是一个元组，它相当于一个记录值。<br/>
键码：如果关系中的某一属性(组)，它的值能够唯一地标识一个元组。而该属性(组)的任一真子集不能标识，则该属性(组)称为关系的键码,或候选码或码。<br/>
超码：以键码作为子集的任意属性集。<br/>
主属性：构成键码的属性。<br/>
非主属性：不构成键码的属性。<br/>
外码：关系R中的属性(组)X是另一个关系S的键码，则X是R的外码(Foreign key)。外码是表示关系(表）间联系的手段<br/>


### 2.特点
1.关系表中的每一个属性都是原子的。 <br/>
值的属性不是原子的(联系电话)<br/>
组合属性不是原子的  (联系地址)<br/>
2.多表中各属性不能重名。<br/>
3.表中的行、列次序并不重要。即交换列的前后顺序不影响其表达的语义。<br/>
4.表中不允许有相同的行出现。<br/>

### 3.关系表示数据
用关系模型组织数据时，首先按数据的特征进行分类，将具有相同特征的数据分为一类，用一张二维表组织：<br/>

学生表<br/>
| 学号 | 姓名 | 性别 | 入学年份 |
|------|------|------|----------|
| S001 | 张三 | 男   | 2022     |
| S002 | 李四 | 女   | 2023     |

课程表<br/>
| 课程号 | 课程名 | 学分 | 开课学院 |
|--------|--------|------|----------|
| C101 | 数据库原理 | 3 | 计算机学院 |
| C102 | 高等数学 | 4 | 数学学院 |

### 4.关系表示联系
用关系模型表示两类数据的联系时，是将能代表两类数据的属性和描述联系性质的的属性组织成一张表。如：<br/>

选课表<br/>
| 学号 | 课程号 | 成绩 | 学期 |
|------|--------|------|------|
| S001 | C101   | 85   | 2023春 |
| S001 | C102   | 90   | 2023春 |
| S002 | C101   | 78   | 2023秋 |

### 5.关系代数
关系代数是抽象的，过程化的查询语言<br/>
特点是：运算对象和运算结果都是关系<br/>

#### 集合运算
我们熟知的交、并、差、笛卡尔乘积。<br/>
集合运算要求并兼容（属性完全相同，即属性个数和属性域都相同）。<br/>

#### 关系运算
1.选择运算/水平运算<br/>
σF(R)，表示从关系R总根据条件表达式F选择新关系。获取某行。<br/>
如 σ 表1 (name = 'Jack') ，表示从表1中选出name为Jack的关系。<br/>

2.投影运算/垂直运算<br/>
ΠA(R)，表示从R中选出某些属性A作为新关系。获取某列。<br/>
如 Π (name,age) (表1) ，表示从表1中选出属性name和age的列。<br/>

3.改名运算<br/>
ρS(R)，表示将关系R改名为S。<br/>
ρs(A1,...,An)(R)，表示将关系R改名为S，且将它的属性依次命名为A1,...,An。<br/>

4.θ连接<br/>
R ⋈θ S，表示两个关系的元组在满足某种条件下进行匹配。<br/>

5.自然连接<br/>
R⋈S，表示两个关系在公共属性上进行等值连接的运算。<br/>

### 6.关系完整性
关系的完整性是指采用关系模型存储的数据及其间的联系能够正确的表达现实世界。<br/>

完整性约束主要包括三大类：<br/>
实体完整性<br/>
参照完整性<br/>
用户定义的完整性<br/>

实体完整型：所有的表都必须有主码(键码)，且其取值非空。<br/>
参照完整型：一个表中的一个元组的存在以另一个表中某一元组的存在为前提。通过外键来实现。<br/>
用户定义的完整性：指明关系中属性的域。<br/>

## 三.

## 四.关系数据库设计理论


